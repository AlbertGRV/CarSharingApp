@model IEnumerable<Booking>
@{
    ViewData["Title"] = "–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è";
}

<div class="container-fluid py-4">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
            <li class="breadcrumb-item active" aria-current="page">–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
        </ol>
    </nav>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="me-2">‚úÖ</i>@TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="me-2">‚ùå</i>@TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–Ω–æ–ø–∫–∞ -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üìã –ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <a asp-action="QuickBooking" class="btn btn-primary">
            <i class="me-2">‚ûï</i>–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        </a>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="card border-0 shadow-sm mb-4">
        <div class="card-body">
            <ul class="nav nav-pills" id="bookingTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="all-tab" data-bs-toggle="pill" data-bs-target="#all" type="button" role="tab">
                        –í—Å–µ (@Model.Count())
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="active-tab" data-bs-toggle="pill" data-bs-target="#active" type="button" role="tab">
                        –ê–∫—Ç–∏–≤–Ω—ã–µ (@Model.Count(b => b.Status == BookingStatus.Active))
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="completed-tab" data-bs-toggle="pill" data-bs-target="#completed" type="button" role="tab">
                        –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ (@Model.Count(b => b.Status == BookingStatus.Completed))
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="cancelled-tab" data-bs-toggle="pill" data-bs-target="#cancelled" type="button" role="tab">
                        –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ (@Model.Count(b => b.Status == BookingStatus.Cancelled))
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫ -->
    <div class="tab-content" id="bookingTabsContent">
        <!-- –í—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div class="tab-pane fade show active" id="all" role="tabpanel">
            @await Html.PartialAsync("_BookingsList", Model.OrderByDescending(b => b.CreatedAt))
        </div>

        <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ -->
        <div class="tab-pane fade" id="active" role="tabpanel">
            @await Html.PartialAsync("_BookingsList", Model.Where(b => b.Status == BookingStatus.Active).OrderBy(b => b.StartTime))
        </div>

        <!-- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ -->
        <div class="tab-pane fade" id="completed" role="tabpanel">
            @await Html.PartialAsync("_BookingsList", Model.Where(b => b.Status == BookingStatus.Completed).OrderByDescending(b => b.EndTime))
        </div>

        <!-- –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ -->
        <div class="tab-pane fade" id="cancelled" role="tabpanel">
            @await Html.PartialAsync("_BookingsList", Model.Where(b => b.Status == BookingStatus.Cancelled).OrderByDescending(b => b.CreatedAt))
        </div>
    </div>
</div>